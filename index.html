<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>R</title>
  <link rel="icon" href="data:,">
  <link type="text/css" rel="stylesheet" href="css/reveal.css">
  <link type="text/css" rel="stylesheet" href="css/theme/black.css">
  <!-- highlight.js theme -->
  <link type="text/css" rel="stylesheet" href="lib/css/atom-one-dark.css">
  <!-- Printing and PDF exports -->
  <script type="text/JavaScript">
  var link = document.createElement( "link" );
  link.rel = "stylesheet";
  link.type = "text/css";
  link.href = window.location.search.match( /print-pdf/gi ) ? "css/print/pdf.css" : "css/print/paper.css";
  document.getElementsByTagName( "head" )[0].appendChild( link );
</script>
</head>
<body>
  <div class="reveal">
    <div class="slides">
      <!-- Início -->
      <section>
        <h1>R</h1>
        <p>André Silva de Queiroz</p>
      </section>
      <!-- Objetivos -->
      <section>
        <h2>O que iremos fazer?</h2>
        <p class="fragment fade-up">Desenvolver um fluxo de trabalho no R.</p>
        <ul>
          <li class="fragment fade-left">Importar dados.</li>
          <li class="fragment fade-left">Explorar e produzir estatísticas.</li>
          <li class="fragment fade-left">Criar visualizações.</li>
          <li class="fragment fade-left">Elaborar relatórios.</li>
        </ul>
      </section>
      <!-- Índice -->
      <section>
        <h2>Divisão do curso</h2>
        <ol>
          <li><a href="#/parte1">Exploração de dados</a></li>
          <li><a href="#/parte2">Visualização de dados</a></li>
          <li><a href="#/parte3">Relatórios dinâmicos</a></li>
        </ol>
      </section>
      <!-- Introdução -->
      <section>
        <section>
          <h2>Por que aprender R?</h2>
        </section>
        <section>
          <h2>Contras</h2>
          <ul>
            <li class="fragment fade-up">Concorrência com Excel (+ Word)!</li>
            <li class="fragment fade-up">Diversas maneiras de fazer a mesma coisa.</li>
            <li class="fragment fade-up">Falta de suporte em português.</li>
          </ul>
        </section>
        <section>
          <h2>Prós</h2>
          <ul>
            <li class="fragment fade-up">Ferramenta livre e de código-aberto.</li>
            <li class="fragment fade-up">Ferramenta para estatísticos feita por estatísticos.</li>
            <li class="fragment fade-up">Ambiente integrado.</li>
            <li class="fragment fade-up">Comunidade extremamente ativa.</li>
            <li class="fragment fade-up">É sempre bom aprendermos algo novo!</li>
          </ul>
        </section>
      </section>
      <!-- Requisitos -->
      <section>
        <section>
          <h2>Ferramentas necessárias</h2>
        </section>
        <section>
          <a href="https://cran.r-project.org" target="_blank">
            <img class="ajustada" src="img/r.svg" alt="R" style="width:300px;border:none;background:transparent;">
          </a>
        </section>
        <section>
          <a href="https://www.rstudio.com" target="_blank">
            <img src="img/rstudio.png" alt="RStudio" style="width:400px;border:none;background:transparent;">
          </a>
        </section>
        <section>
          <a href="https://www.tug.org/texlive" target="_blank">
            <img src="img/texlive.png" alt="TeX Live" style="width:600px;border:none;background:transparent;">
          </a>
        </section>
        <section>
          <img src="img/windows.png" alt="Windows", style="width:100px;border:none;background:transparent;">
          <br/>
          <a href="https://miktex.org" target="_blank">
            <img src="img/miktex.png" alt="MiKTeX" style="width:600px;border:none;background:transparent;">
          </a>
        </section>
        <section>
          <a href="https://pandoc.org" target="_blank">Pandoc</a>
          <p>Geralmente incluído na instalação do RStudio.</p>
        </section>
      </section>
      <!-- RStudio e instruções iniciais -->
      <section>
        <h2>Conhecendo o RStudio</h2>
        <ul>
          <li>Seções da interface.</li>
          <li>Opções principais.</li>
          <li>Instalar e atualizar bibliotecas (ou pacotes).</li>
        </ul>
      </section>
      <section>
        <h2>Console</h2>
        <pre><code class="r" data-trim contenteditable spellcheck="false">
          # cálculos elementares
          2 + 3
          16 / 3
          log(27)
        </code></pre>
        <pre class="fragment fade-down"><code class="r" data-trim contenteditable spellcheck="false">
          # criação de objetos
          x <- 2.75
          y <- x ** 2
        </code></pre>
        <p class="fragment">Porém, use sempre scripts!</p>
      </section>
      <!-- Parte 1 -->
      <section id="parte1">
        <section>
          <h2>Exploração de dados</h2>
          <p>tidyverse</p>
        </section>
        <section>
          <p>Carregar a biblioteca no R.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            library(tidyverse)
          </code></pre>
        </section>
      </section>
      <section>
        <section>
          <h2>Importando os dados</h2>
        </section>
        <section>
          <p>A função <code>read_tsv()</code> importa um arquivo de texto separado por tabulações.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            # movimentação processual
            mov_proc <- read_tsv("movimentacao.txt")
          </code></pre>
        </section>
        <section>
          <p>Para saber mais sobre qualquer função digite:</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            ?nome_da_funcao()
          </code></pre>
	  <p class="fragment"><a href="https://www.rdocumentation.org/" target="_blank">https://www.rdocumentation.org/</a></p>
        </section>
      </section>
      <section>
        <p>Visualização dos dados importados.</p>
        <pre><code class="r" data-trim contenteditable spellcheck="false">
          print(mov_proc)

          mov_proc
        </code></pre>
	<pre class ="fragment"><code class="r" data-trim contenteditable spellcheck="false">
          # resumo
          summary(mov_proc)
        </code></pre>
        <p class="fragment">A base foi salva num objeto da classe <code>tibble</code>.</p>
      </section>
      <section>
        <section>
          <h2>dplyr</h2>
          <p>A gramática da manipulação de dados</p>
          <ul>
            <li class="fragment fade-left"><font size="6"><code>filter()</code>: filtra a base a partir de um ou mais valores.</font></li>
            <li class="fragment fade-left"><font size="6"><code>select()</code>: seleciona uma ou mais variáveis da base.</font></li>
            <li class="fragment fade-left"><font size="6"><code>mutate()</code>: modifica a base.</font></li>
            <li class="fragment fade-left"><font size="6"><code>arrange()</code>: ordena a base.</font></li>
            <li class="fragment fade-left"><font size="6"><code>summarise()</code>: calcula estatísticas.</font></li>
            <li class="fragment fade-left"><font size="6"><code>group_by()</code>: agrupa a base a partir de uma ou mais variáveis.</font></li>
          </ul>
        </section>
        <section>
          <p>Os comandos são encadeados através do operador<br/><code>%>%</code></p>
        </section>
      </section>
      <!-- filter -->
      <section>
        <section>
          <h2><code>filter()</code></h2>
          <p>Filtra a base a partir de um ou mais valores.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              filter(grau == 2)
          </code></pre>
        </section>
        <section>
          <p>Operadores lógicos</p>
          <font size="6">
            <table>
              <thead>
                <tr>
                  <th>Operador</th>
                  <th>Significado</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>==</code></td>
                  <td>igualdade</td>
                </tr>
                <tr>
                  <td><code>&gt;</code></td>
                  <td>maior que</td>
                </tr>
                <tr>
                  <td><code>&lt;</code></td>
                  <td>menor que</td>
                </tr>
                <tr>
                  <td><code>&gt;=</code></td>
                  <td>maior ou igual a</td>
                </tr>
                <tr>
                  <td><code>&lt;=</code></td>
                  <td>menor ou igual a</td>
                </tr>
                <tr>
                  <td><code>!</code></td>
                  <td>negação</td>
                </tr>
                <tr class="fragment">
                  <td><code>!=</code></td>
                  <td>desigualdade</td>
                </tr>
              </tbody>
            </table>
          </font>
        </section>
	<section>
          <p>Filtrar a partir de condições variáveis.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              filter(recebidos < mean(recebidos))
          </code></pre>
          <pre class="fragment fade-up"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              filter(julgados > recebidos)
          </code></pre>
	  <pre class="fragment fade-down"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              filter(periodo == max(periodo))
          </code></pre>
        </section>
        <section>
          <p>Filtrar a partir de mais de uma condição.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              filter(periodo > "2018-01-01")

            mov_proc %>%
              filter(periodo > "2018-01-01") %>%
              filter(julgados > recebidos)
            </code></pre>
          <pre class="fragment fade-down"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              filter(periodo > "2018-01-01", julgados > recebidos)
          </code></pre>
        </section>
        <section data-background="#017243">
	  <p>Filtre os dados a partir de março de 2018.</p>
          <pre class="fragment fade-right"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              filter(periodo > "2018-03-01")
          </code></pre>
          <p>Filtre os dados das varas com mais de 4.000 processos pendentes no último período.</p>
          <pre class="fragment fade-right"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              filter(grau == 1, pendentes > 4000,
                     periodo == max(periodo))
          </code></pre>
          <p>Filtre os dados da 3ª Vara de Jundiaí.</p>
          <pre class="fragment fade-right"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              filter(sede == "Jundiaí", vt == 3)
          </code></pre>
          <p><font size="6">Dica: use aspas (simples ou duplas) para definir valores textuais.</font></p>
        </section>
      </section>
      <!-- select -->
      <section>
        <section>
          <h2><code>select()</code></h2>
          <p>Seleciona uma ou mais variáveis da base.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              select(recebidos)
          </code></pre>
        </section>
        <section>
          <p>As funções <code>starts_with()</code> e <code>ends_with()</code> facilitam uma seleção sistemática.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              select(ends_with("sede"))
          </code></pre>
	  <div class="fragment fade-down">
	    <p>Mais opções de seletores.</p>
            <pre><code class="r" data-trim contenteditable spellcheck="false">
              ?tidyselect::select_helpers
            </code></pre>
	  </div>
        </section>
        <section data-background="#017243">
          <p>Selecione a série de processos julgados.</p>
          <pre class="fragment fade-right"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              select(julgados)
          </code></pre>
          <p>Selecione o período e a série de processos pendentes.</p>
          <pre class="fragment fade-right"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              select(periodo, pendentes)
          </code></pre>
	  <p>Selecione os processos recebidos no 2º Grau em 2017.</p>
          <pre class="fragment fade-right"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              filter(grau != 1, periodo < "2018-01-01") %>%
              select(recebidos)
          </code></pre>
        </section>
      </section>
      <!-- mutate -->
      <section>
        <section>
          <h2><code>mutate()</code></h2>
          <p>Modifica a base.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              mutate(tx_julg = julgados / recebidos)
          </code></pre>
        </section>
	<section>
	  <p>Teste condicional.</p>
	  <pre><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              mutate(status = if_else(julgados > recebidos,
                                      "Produtiva", "Não produtiva"))
          </code></pre>
	</section>
        <section data-background="#017243">
          <p>Crie, em percentual, a taxa de processos julgados sobre recebidos e selecione a vara do trabalho e a variável criada.</p>
          <pre class="fragment fade-right"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              mutate(tx_julg = 100 * julgados / recebidos) %>%
              filter(grau == 1) %>%
              select(sede, vt, tx_julg)
          </code></pre>
          <p>Calcule a taxa de julgados sobre julgados + pendentes.</p>
          <pre class="fragment fade-right"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              mutate(taxa = julgados / (julgados + pendentes))
          </code></pre>
        </section>
      </section>
      <!-- arrange -->
      <section>
        <section>
          <h2><code>arrange()</code></h2>
          <p>Ordena a base.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              arrange(julgados)
          </code></pre>
        </section>
        <section>
          <p>A função <code>desc()</code> faz o ordenamento decrescente.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              arrange(desc(recebidos))
          </code></pre>
        </section>
	<section>
	  <p>Classificação de valores.</p>
	  <pre><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              mutate(ranking = min_rank(recebidos)) %>%
              arrange(recebidos)
          </code></pre>
	</section>
        <section data-background="#017243">
          <p>Crie novamente a taxa de processos julgados sobre recebidos, selecione o período, a vara do trabalho e a variável criada e ordene a base em ordem decrescente segundo a taxa calculada.</p>
          <pre class="fragment fade-right"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              mutate(tx_julg = julgados / recebidos) %>%
              select(periodo, sede, vt, tx_julg) %>%
              arrange(desc(tx_julg))
          </code></pre>
        </section>
      </section>
      <!-- summarise -->
      <section>
        <section>
          <h2><code>summarise()</code></h2>
          <p>Calcula estatísticas.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              summarise(media_julg = mean(julgados))
          </code></pre>
        </section>
        <section>
          <p>Principais funções:</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            # média
            mov_proc %>%
              summarise(media_julg = mean(julgados))

            # soma
            mov_proc %>%
              summarise(soma_julg = sum(julgados))

            # contagem
            mov_proc %>%
              summarise(total = n())

            # contagem distinta
            mov_proc %>%
              summarise(total = n_distinct(sede, vt))
          </code></pre>
          <p><font size="6">Outras funções: <code>min()</code>, <code>max()</code>, <code>median()</code>, <code>var()</code>, <code>sd()</code>, ...</font></p>
        </section>
        <section data-background="#017243">
          <p>Calcule a média de processos recebidos, julgados e pendentes das Varas do Trabalho.</p>
          <pre class="fragment fade-right"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              filter(grau == 1) %>%
              summarise(m_rec = mean(recebidos),
                        m_julg = mean(julgados),
                        m_pend = mean(pendentes))
          </code></pre>
        </section>
      </section>
      <!-- group_by -->
      <section>
        <section>
          <h2><code>group_by()</code></h2>
          <p>Agrupa a base a partir de uma ou mais variáveis.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              group_by(grau) %>%
              summarise(media_julg = mean(julgados))
          </code></pre>
          <pre class="fragment"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              group_by(grau, periodo) %>%
              summarise(media_julg = mean(julgados))
          </code></pre>
        </section>
        <section data-background="#017243">
          <p>Calcule a média de processos recebidos, julgados e pendentes das Varas do Trabalho por mês.</p>
          <pre class="fragment fade-right"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              filter(grau == 1) %>%
              group_by(periodo) %>%
              summarise(m_rec = mean(recebidos),
                        m_julg = mean(julgados),
                        m_pend = mean(pendentes))
          </code></pre>
	  <p>Calcule a taxa de julgamento sobre recebidos para as duas instâncias em 2017.</p>
          <pre class="fragment fade-left"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              filter(periodo < "2018-01-01") %>%
              group_by(grau) %>%
              summarise(rec = sum(recebidos),
                        julg = sum(julgados)) %>%
              mutate(tx = julg / rec)
          </code></pre>
        </section>
      </section>
      <!-- pergunta -->
      <section>
        <p>Qual o resultado da sequência de comandos seguinte?</p>
        <pre><code class="r" data-trim contenteditable spellcheck="false">
          mov_proc %>%
            select(sede, vt) %>%
            distinct() %>%
            group_by(sede) %>%
            summarise(x = n()) %>%
            arrange(desc(x))
        </code></pre>
      </section>
      <!-- base temporal -->
      <section>
        <section>
          <p>Outro exemplo:</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            temporal <- read_tsv("temporal.txt")
            temporal
          </code></pre>
        </section>
        <section>
          <p>Resumo da situação dos processos.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            temporal %>%
              group_by(periodo, status) %>%
              summarise(total = n())
          </code></pre>
        </section>
        <section>
          <p>Criar variável "auxiliar".</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            temporal %>%
              group_by(periodo, status) %>%
              summarise(total = n()) %>%
              ungroup() %>%
              mutate(mes = if_else(periodo == max(periodo),
                                   "atual", "ant"))
          </code></pre>
        </section>
        <section>
          <p>Eliminar a variável período.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            temporal %>%
              group_by(periodo, status) %>%
              summarise(total = n()) %>%
              ungroup() %>%
              mutate(mes = if_else(periodo == max(periodo),
                                   "atual", "ant")) %>%
              select(-periodo)
          </code></pre>
        </section>
        <section>
          <p>Unir variáveis em uma só.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            temporal %>%
              group_by(periodo, status) %>%
              summarise(total = n()) %>%
              ungroup() %>%
              mutate(mes = if_else(periodo == max(periodo),
                                   "atual", "ant")) %>%
              select(-periodo) %>%
              unite(status_mes, status, mes)
          </code></pre>
        </section>
        <section>
          <p>Espalhar base de dados.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            temporal %>%
              group_by(periodo, status) %>%
              summarise(total = n()) %>%
              ungroup() %>%
              mutate(mes = if_else(periodo == max(periodo),
                                   "atual", "ant")) %>%
              select(-periodo) %>%
              unite(status_mes, status, mes) %>%
              spread(status_mes, total)
          </code></pre>
        </section>
        <section>
          <p>Calcular diferenças.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            temporal %>%
              group_by(periodo, status) %>%
              summarise(total = n()) %>%
              ungroup() %>%
              mutate(mes = if_else(periodo == max(periodo),
                                   "atual", "ant")) %>%
              select(-periodo) %>%
              unite(status_mes, status, mes) %>%
              spread(status_mes, total) %>%
              mutate(saldo_esp = saldo_ant + entrada_atual - saida_atual,
                     diferenca = saldo_atual - saldo_esp)
          </code></pre>
          <p class="fragment">E se quisermos saber por magistrado, e por origem do processo?</p>
        </section>
        <section>
          <p>Substituir valores ausentes por zero.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            temporal %>%
              group_by(periodo, status) %>%
              summarise(total = n()) %>%
              ungroup() %>%
              mutate(mes = if_else(periodo == max(periodo),
                                   "atual", "ant")) %>%
              select(-periodo) %>%
              unite(status_mes, status, mes) %>%
              spread(status_mes, total) %>%
              mutate_if(is.integer, funs(ifelse(is.na(.), 0, .))) %>%
              mutate(saldo_esp = saldo_ant + entrada_atual - saida_atual,
                     diferenca = saldo_atual - saldo_esp)
          </code></pre>
        </section>
      </section>
      <section>
        <section data-background="#017243">
          <h2>Recapitulando</h2>
          <ul>
            <font size="6">
              <li>Determine as 10 varas do trabalho que tiveram a maior taxa acumulada de processos julgados por recebidos em 2018.</li>
              <li>Determine a soma dos processos recebidos no 1º Grau em 2017 por sede de jurisdição.</li>
            </font>
          </ul>
        </section>
        <section data-background="#017243">
          <p>Determine as 10 varas do trabalho que tiveram a maior taxa de julgamento acumulada em 2018.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              filter(grau == 1, periodo > "2018-01-01") %>%
              group_by(sede, vt) %>%
              summarise(julgados = sum(julgados),
                        recebidos = sum(recebidos),
                        tx_julg = julgados / recebidos) %>%
              arrange(desc(tx_julg))
          </code></pre>
        </section>
        <section data-background="#017243">
          <p>Determine a soma dos processos recebidos no 1º Grau em 2017 por sede de jurisdição.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              filter(grau == 1, periodo < "2018-01-01") %>%
              group_by(sede) %>%
              summarise(recebidos = sum(recebidos))
          </code></pre>
        </section>
      </section>
      <!-- Parte 2 -->
      <section id="parte2">
        <section>
          <h2>Visualização de dados</h2>
          <p>ggplot2</p>
        </section>
        <section>
          <p>Carregar a biblioteca e a base de dados no R.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            library(tidyverse)

            # prazo
            prazo <- read_tsv("prazo.txt")
          </code></pre>
	  <p class="fragment">Observe as variáveis inicio e fim.</p>
        </section>
        <section>
          <p>Utilizar a biblioteca lubridate.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            library(lubridate)

            prazo <- read_tsv("prazo.txt") %>%
                       mutate(inicio = dmy(inicio), fim = dmy(fim))
          </code></pre>
        </section>
      </section>
      <section>
        <section>
          <h2>ggplot2</h2>
          <p>A gramática dos gráficos</p>
          <ul>
            <li class="fragment"><font size="6">Mapear informações em aspectos geométricos e estéticos em visualizações.</font></li>
            <li class="fragment"><font size="6">Construção a partir de camadas.</font></li>
          </ul>
        </section>
        <section>
          <p>Os comandos são encadeados através do operador<br/><code>+</code></p>
        </section>
      </section>
      <!-- geom_point -->
      <section>
        <section>
          <h2><code>geom_point()</code></h2>
          <p>Mapeamento através de pontos.</p>
        </section>
        <section>
          <p>Qual o resultado da sequência?</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              filter(grau == 1) %>%
              mutate(dias = fim - inicio) %>%
              group_by(periodo) %>%
              summarise(total = n(), prazo = mean(dias))
          </code></pre>
        </section>
        <section>
          <p>Mapeamento através de pontos.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              filter(grau == 1) %>%
              mutate(dias = fim - inicio) %>%
              group_by(periodo) %>%
              summarise(total = n(), prazo = mean(dias)) %>%
              ggplot(mapping = aes(x = total, y = prazo)) +
              geom_point()
          </code></pre>
        </section>
        <section data-background="#017243">
          <p>Faça um gráfico de pontos com a média de dias dos processos em função do período das remessas para os dados de 1º Grau.</p>
          <pre class="fragment fade-right"><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              filter(grau == 1) %>%
              mutate(dias = fim - inicio) %>%
              group_by(periodo) %>%
              summarise(total = n(), prazo = mean(dias)) %>%
              ggplot(mapping = aes(x = periodo, y = prazo)) +
              geom_point()
          </code></pre>
          <pre class="fragment fade-down"><code class="r" data-trim contenteditable spellcheck="false">
            Sys.setlocale("LC_TIME", "Portuguese_Brazil.1252")
          </code></pre>
        </section>
        <section data-background="#017243">
          <p>Faça um gráfico de pontos com os procesos julgados em função dos processos recebidos.</p>
          <pre class="fragment fade-right"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              ggplot(mapping = aes(x = recebidos, y = julgados)) +
              geom_point()
          </code></pre>
          <p class="fragment fade-right">Agora refaça o gráfico mostrando apenas os dados de 1º Grau.</p>
          <pre class="fragment fade-right"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              filter(grau == 1) %>%
              ggplot(mapping = aes(x = recebidos, y = julgados)) +
              geom_point()
          </code></pre>
        </section>
      </section>
      <!-- geom_line -->
      <section>
        <section>
          <h2><code>geom_line()</code></h2>
          <p>Mapeamento através de linhas.</p>
        </section>
        <section>
          <p>Mudança da geometria: ponto &rarr; linha.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              filter(grau == 1) %>%
              mutate(dias = fim - inicio) %>%
              group_by(periodo) %>%
              summarise(total = n(), prazo = mean(dias)) %>%
              ggplot(mapping = aes(x = total, y = prazo)) +
              geom_line()
          </code></pre>
        </section>
        <section data-background="#017243">
          <p>Faça um gráfico de pontos <u>unidos por uma linha</u> com a média de dias dos processos em função do período das remessas para os dados de 1º Grau.</p>
          <pre class="fragment fade-right"><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              filter(grau == 1) %>%
              mutate(dias = fim - inicio) %>%
              group_by(periodo) %>%
              summarise(total = n(), prazo = mean(dias)) %>%
              ggplot(mapping = aes(x = periodo, y = prazo)) +
              geom_point() +
              geom_line()
          </code></pre>
        </section>
        <section>
          <p>Novo elemento estético: cor.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              mutate(dias = fim - inicio) %>%
              group_by(grau, periodo) %>%
              summarise(total = n(), prazo = mean(dias)) %>%
              ggplot(mapping = aes(x = periodo, y = prazo,
                                   color = factor(grau))) +
              geom_point() +
              geom_line()
          </code></pre>
        </section>
        <section>
          <p>Rótulos e títulos.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              mutate(dias = fim - inicio) %>%
              group_by(grau, periodo) %>%
              summarise(total = n(), prazo = mean(dias)) %>%
              ggplot(mapping = aes(x = periodo, y = prazo,
                     color = factor(grau))) +
              geom_point() +
              geom_line() +
              labs(x = "Período", y = "Dias", color = "Grau",
                   title = "Duração média dos processos")
          </code></pre>
          <pre class="fragment fade-up"><code class="r" data-trim contenteditable spellcheck="false">
            scale_color_hue(labels = c("1º", "2º"))
          </code></pre>
        </section>
        <section data-background="#017243">
          <p>Faça um gráfico de linha com a média de dias dos processos em função do período das remessas para os dados das varas de Ribeirão Preto.</p>
          <pre class="fragment fade-left"><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              filter(grau == 1, sede == "Ribeirão Preto") %>%
              mutate(dias = fim - inicio) %>%
              group_by(periodo, vt) %>%
              summarise(total = n(), prazo = mean(dias)) %>%
              ggplot(mapping = aes(x = periodo, y = prazo,
                                   color = factor(vt))) +
              geom_line() +
              labs(x = "Período", y = "Dias",
                   title = "Duração média dos processos",
                   color = "Varas de\nRibeirão Preto")
          </code></pre>
        </section>
        <section data-background="#017243">
          <p>Faça um gráfico de linha com os processos recebidos por período no 1º e 2º Graus.</p>
          <pre class="fragment fade-left"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              group_by(periodo, grau) %>%
              summarise(recebidos = sum(recebidos)) %>%
              ggplot(mapping = aes(x = periodo, y = recebidos,
                                   color = factor(grau))) +
              geom_line()
          </code></pre>
        </section>
	<section>
	  <p>Mude <code>geom_line()</code> para <code>geom_smooth()</code>.</p>
	  <pre><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              group_by(periodo, grau) %>%
              summarise(recebidos = sum(recebidos)) %>%
              ggplot(mapping = aes(x = periodo, y = recebidos,
                                   color = factor(grau))) +
              geom_smooth()
          </code></pre>
	  <div class="fragment fade-right">
	    <p>Opções de suavizações.</p>
	    <pre><code class="r" data-trim contenteditable spellcheck="false">
              ?geom_smooth()
            </code></pre>
	  </div>
	</section>
      </section>
      <!-- geom_bar -->
      <section>
        <section>
          <h2><code>geom_bar()</code></h2>
          <p>Mapeamento através de barras.</p>
        </section>
        <section>
          <p>Essa função faz a contagem automaticamente.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              filter(grau == 2) %>%
              ggplot(mapping = aes(x = periodo)) +
              geom_bar()
          </code></pre>
        </section>
        <section>
          <p>Para visualizar dados já calculados use <code>geom_col()</code>.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              filter(grau == 2) %>%
              group_by(periodo) %>%
              summarise(total = n()) %>%
              ggplot(mapping = aes(x = periodo, y = total)) +
              geom_col()
          </code></pre>
        </section>
        <section data-background="#017243">
          <p>Faça um gráfico de barras com a contagem de processos por classe processual de 2º Grau que tiveram no máximo 300 registros.</p>
          <pre class="fragment fade-right"><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              filter(grau == 2) %>%
              group_by(sigla_classe) %>%
              summarise(total = n()) %>%
              filter(total <= 300) %>%
              ggplot(mapping = aes(x = sigla_classe, y = total)) +
              geom_col(fill = "steelblue") +
              coord_flip()
          </code></pre>
          <div class="fragment fade-up">
            <p>Mais opções de cores.</p>
            <pre><code class="r" data-trim contenteditable spellcheck="false">
              grDevices::colors()
            </code></pre>
          </div>
        </section>
        <section>
          <p>Novo elemento estético: preenchimento.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              mutate(dias = fim - inicio) %>%
              filter(grau == 2, sigla_classe %in% c("RO", "ROPS")) %>%
              group_by(periodo, sigla_classe) %>%
              summarise(dias = mean(dias)) %>%
              ggplot(mapping = aes(x = periodo, y = dias,
                                   fill = sigla_classe)) +
              geom_col()
          </code></pre>
          <div class="fragment fade-up">
            <p>Posicionamento lado a lado das barras.</p>
            <pre><code class="r" data-trim contenteditable spellcheck="false">
              geom_col(position = "dodge")
            </code></pre>
          </div>
        </section>
        <section>
          <p>Qual o resultado da sequência de comandos seguinte?</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              filter(grau == 2) %>%
              group_by(sigla_classe) %>%
              summarise(total = n()) %>%
              filter(total > 300)
          </code></pre>
        </section>
        <section>
          <p>Mapeamento transferido: x &rarr; preenchimento.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              filter(grau == 2) %>%
              group_by(sigla_classe) %>%
              summarise(total = n()) %>%
              filter(total > 300) %>%
              ggplot(mapping = aes(x = "", y = total,
                                   fill = sigla_classe)) +
              geom_col()
          </code></pre>
          <div class="fragment fade-up">
            <p>Largura de preenchimento em 100%.</p>
            <pre><code class="r" data-trim contenteditable spellcheck="false">
              geom_col(width = 1)
            </code></pre>
          </div>
          <div class="fragment fade-down">
            <p>Curvatura no eixo y.</p>
            <pre><code class="r" data-trim contenteditable spellcheck="false">
              coord_polar(theta = "y", start = 0)
            </code></pre>
          </div>
        </section>
        <section data-background="#017243">
          <p>Faça um gráfico de barras com os processos recebidos nas varas do trabalho por período.</p>
          <pre class="fragment fade-left"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              filter(grau == 1) %>%
              group_by(periodo) %>%
              summarise(recebidos = sum(recebidos)) %>%
              ggplot(mapping = aes(x = periodo, y = recebidos)) +
              geom_col()
          </code></pre>
        </section>
      </section>
      <!-- geom_histogram -->
      <section>
        <section>
          <h2><code>geom_histogram()</code></h2>
          <p>Mapeamento através de histogramas.</p>
        </section>
        <section>
          <p>Histograma padrão.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              mutate(dias = fim - inicio) %>%
              filter(grau == 1, dias < 365) %>%
              ggplot(mapping = aes(x = dias)) +
              geom_histogram()
          </code></pre>
	  <div class="fragment fade-down">
	    <p>Cores das bordas.</p>
            <pre><code class="r" data-trim contenteditable spellcheck="false">
              geom_histogram(color = "white")
            </code></pre>
	  </div>
        </section>
        <section data-background="#017243">
          <p>Faça um histograma com a duração dos processos de 1º e 2º Graus mapeadas separadamente pelo <u>preenchimento</u>. Use apenas os processos que duraram menos de um ano.</p>
          <pre class="fragment fade-right"><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              mutate(dias = fim - inicio) %>%
              filter(dias < 365) %>%
              ggplot(mapping = aes(x = dias, fill = factor(grau))) +
              geom_histogram()
          </code></pre>
          <p>Dica: lembre-se que grau é uma variável do tipo inteira. Use <code>factor()</code> para transforma-la em categórica.</p>
        </section>
        <section>
          <p>Mudança da geometria: histograma &rarr; densidade.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              mutate(dias = fim - inicio) %>%
              filter(dias < 365) %>%
              ggplot(mapping = aes(x = dias, fill = factor(grau))) +
              geom_density()
          </code></pre>
          <div class="fragment fade-down">
            <p>Parâmetro de transparência.</p>
            <pre><code class="r" data-trim contenteditable spellcheck="false">
              geom_density(alpha = 0.6)
            </code></pre>
          </div>
        </section>
        <section data-background="#017243">
          <p>Faça um gráfico de densidade comparado os processos recebidos nas varas de Campinas em 2018.</p>
          <pre class="fragment fade-left"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              filter(sede == "Campinas", year(periodo) == 2018) %>%
              ggplot(mapping = aes(x = recebidos, fill = factor(vt))) +
              geom_density(alpha = 0.4)
          </code></pre>
          <p class="fragment">Teste também com julgados e com a taxa de julgamento.</p>
        </section>
      </section>
      <!-- geom_boxplot -->
      <section>
        <section>
          <h2><code>geom_boxplot()</code></h2>
          <p>Mapeamento através de diagramas de caixas.</p>
        </section>
        <section>
          <p>Diagrama de caixas por períodos.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              mutate(dias = fim - inicio) %>%
              filter(grau == 1, sede == "Araraquara",
                     year(periodo) == 2018) %>%
              ggplot(mapping = aes(x = factor(periodo), y = dias)) +
              geom_boxplot()
          </code></pre>
        </section>
        <section>
          <p>Mapeamento da vara no preenchimento.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              mutate(dias = fim - inicio) %>%
              filter(grau == 1, sede == "Araraquara",
                     year(periodo) == 2018) %>%
              ggplot(mapping = aes(x = factor(periodo), y = dias,
                                   fill = factor(vt))) +
              geom_boxplot()
          </code></pre>
        </section>
        <section data-background="#017243">
          <p>Faça um diagrama de caixas com as durações dos processos das varas de Campinas separadas por classe.</p>
          <pre class="fragment fade-down"><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              mutate(dias = fim - inicio) %>%
              filter(grau == 1, sede == "Campinas") %>%
              ggplot(mapping = aes(x = sigla_classe, y = dias,
                                   fill = sigla_classe)) +
              geom_boxplot() +
              coord_flip()
          </code></pre>
        </section>
        <section data-background="#017243">
          <p>Faça um diagrama de caixas com os processos recebidos nas varas por mês em 2018.</p>
          <pre class="fragment fade-left"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              filter(grau == 1, year(periodo) == 2018) %>%
              ggplot(mapping = aes(x = factor(periodo),
                                   y = recebidos)) +
              geom_boxplot()
          </code></pre>
        </section>
      </section>
      <!-- geom_map -->
      <section>
        <section>
          <h2><code>geom_map()</code></h2>
          <p>Mapeamento através de mapas coropléticos.</p>
        </section>
        <section>
          <p>Carregar a biblioteca no R.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            # bibliotecas maptools e rgeos
            # devem estar instaladas no sistema
            library(rgdal)
          </code></pre>
        </section>
        <section>
          <p>Carregar as malhas digitais.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            malha_trt <- readOGR(dsn = "./malhas/trt",
                                 layer = "trt15") %>%
              fortify(region = "cd_geocmu") %>%
              rename(x = long, y = lat)
          </code></pre>
        </section>
        <section>
          <p>Mapa padrão.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              mutate(dias = fim - inicio) %>%
              filter(grau == 1) %>%
              group_by(cod_sede) %>%
              summarise(total = n()) %>%
              ggplot(mapping = aes(map_id = cod_sede, fill = total)) +
              geom_map(map = malha_trt) +
              expand_limits(malha_trt)
          </code></pre>
        </section>
        <section>
          <p>Cores personalizadas.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              mutate(dias = fim - inicio) %>%
              filter(grau == 1, sede != "Campinas") %>%
              group_by(cod_sede) %>%
              summarise(total = n()) %>%
              ggplot(mapping = aes(map_id = cod_sede, fill = total)) +
              geom_map(map = malha_trt) +
              expand_limits(malha_trt) +
              scale_fill_gradient(low = "wheat", high = "red",
                                  name = "Quantidade\nde processos")
          </code></pre>
          <div class="fragment fade-down">
            <p>Escala com cor intermediária.</p>
            <pre><code class="r" data-trim contenteditable spellcheck="false">
              scale_fill_gradient2(low = "c1", mid = "c2", high = "c3")
            </code></pre>
          </div>
        </section>
        <section>
          <p>Cores personalizadas.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              mutate(dias = fim - inicio) %>%
              filter(grau == 1, sede != "Campinas") %>%
              group_by(cod_sede) %>%
              summarise(total = n()) %>%
              ggplot(mapping = aes(map_id = cod_sede, fill = total)) +
              geom_map(map = malha_trt) +
              expand_limits(malha_trt) +
              scale_fill_gradient(low = "wheat", high = "red",
                                  name = "Quantidade\nde processos") +
              labs(title = "Processos baixados no 1º Grau.",
                   subtitle = "Exceto Campinas.") +
              theme(line = element_blank(), rect = element_blank(),
                    axis.text = element_blank(),
                    axis.title = element_blank()) +
              coord_fixed()
          </code></pre>
        </section>
        <section data-background="#017243">
          <p>Faça um mapa com a média de duração dos processos por município sede de vara.</p>
          <pre class="fragment fade-down"><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              mutate(dias = fim - inicio) %>%
              filter(grau == 1) %>%
              group_by(cod_sede) %>%
              summarise(media = mean(dias)) %>%
              ggplot(mapping = aes(map_id = cod_sede,
                                   fill = as.numeric(media))) +
              geom_map(map = malha_trt) +
              expand_limits(malha_trt) +
              scale_fill_gradient(low = "wheat", high = "red",
                                  name = "Dias") +
              theme(line = element_blank(), rect = element_blank(),
                    axis.text = element_blank(),
                    axis.title = element_blank()) +
              coord_fixed()
          </code></pre>
          <p>Dica: use <code>as.numeric()</code> para converter o cálculo da diferença de dias em numérico.</p>
        </section>
        <section data-background="#017243">
          <p>Faça um mapa com a taxa de julgamento das varas do trabalho em 2018.</p>
          <pre class="fragment fade-down"><code class="r" data-trim contenteditable spellcheck="false">
            mov_proc %>%
              filter(grau == 1, year(periodo) == 2018) %>%
              group_by(cod_sede) %>%
              summarise(julgados = sum(julgados),
                        recebidos = sum(recebidos)) %>%
              mutate(tx_julg = julgados / recebidos) %>%
              ggplot(mapping = aes(map_id = cod_sede,
                                   fill = tx_julg)) +
              geom_map(map = malha_trt) +
              expand_limits(malha_trt)
          </code></pre>
        </section>
	<section>
	  <p>Malha do Estado de São Paulo.</p>
	  <pre><code class="r" data-trim contenteditable spellcheck="false">
            malha_sp <- readOGR(dsn = "./malhas/uf",
                                layer = "sao_paulo") %>%
              fortify(region = "cd_geocmu") %>%
              rename(x = long, y = lat)
          </code></pre>
	</section>
	<section>
	  <p>Contar os processos baixados nas varas de Campinas que não sejam de Campinas.</p>
	  <pre><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              filter(grau == 1, sede == "Campinas",
                     mun_origem != "Campinas") %>%
              group_by(cod_mun_origem) %>%
              summarise(total = n())
          </code></pre>
	</section>
	<section>
	  <p>Mapeamento global vs mapeamento na camada.</p>
	  <pre><code class="r" data-trim contenteditable spellcheck="false">
            prazo 
              filter(grau == 1, sede == "Campinas",
                     mun_origem != "Campinas") %>%
              group_by(cod_mun_origem) %>%
              summarise(total = n()) %>%
              ggplot(mapping = aes(map_id = cod_mun_origem)) +
              geom_map(fill = NA, color = "black",
                       map = malha_sp, data = prazo) +
              geom_map(mapping = aes(fill = total),
              color = "black", map = malha_sp) +
              expand_limits(malha_sp)
          </code></pre>
	</section>
	<section data-background="#017243">
          <p>Faça um mapa com a duração média dos processos nas varas do trabalho por município de origem.</p>
          <pre class="fragment fade-down"><code class="r" data-trim contenteditable spellcheck="false">
            prazo %>%
              filter(grau == 1) %>%
              mutate(dias = fim - inicio) %>%
              group_by(cod_mun_origem) %>%
              summarise(dias = mean(dias)) %>%
              ggplot(mapping = aes(map_id = cod_mun_origem,
                                   fill = as.numeric(dias))) +
              geom_map(map = malha_sp) +
              expand_limits(malha_sp)
          </code></pre>
        </section>
      </section>
      <!-- Parte 3 -->
      <section id="parte3">
        <h2>Relatórios dinâmicos</h2>
        <p>knitr</p>
      </section>
      <section>
        <section>
          <h2>knitr</h2>
          <p>Produção de relatórios dinâmicos no R de forma elegante, flexível e rápida.</p>
          <ul>
            <li class="fragment"><font size="6">Formatação do conteúdo através de linguagens de marcação.</font></li>
            <li class="fragment"><font size="6">Compilação das informações durante a execução.</font></li>
            <li class="fragment"><font size="6">Produção automática do relatório.</font></li>
          </ul>
        </section>
      </section>
      <section>
        <h2>Linguagens de Marcação</h2>
        <ul>
          <li>LaTeX</li>
          <li>Markdown</li>
        </ul>
      </section>
      <!-- Markdown -->
      <section>
        <section>
          <h2>Markdown</h2>
          <p>Linguagem de marcação "universal" adaptada ao R.</p>
        </section>
        <section>
          <p>Criar novo arquivo no RStudio.</p>
	  <ul>
	    <li>File</li>
	    <li>New File</li>
	    <li>R Markdown</li>
	  </ul>
        </section>
	<section>
	  <p>Arquivo OpenDocument Text.</p>
	  <pre><code data-trim contenteditable spellcheck="false">
            ---
            title: "Movimentação Processual"
            author: "Coordenadoria de Estatística do TST"
            date: "19 de junho de 2018"
            output: odt_document
            ---
	  </code></pre>
	</section>
	<section>
	  <p>Primeiro <i>chunk</i> com comandos em R.</p>
	  <pre><code data-trim contenteditable spellcheck="false">
            ```{r}
            library(tidyverse)
            library(lubridate)

            # dados
            mov_proc <- read_tsv("mov_proc.txt")
            ```
	  </code></pre>
	</section>
        <section>
          <p>Total de processos (no <i>chunk</i>).</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            # variáveis
            recebidos <- mov_proc %>%
                           filter(grau == 1, year(periodo) == 2018) %>%
                           summarise(total = sum(recebidos)) %>%
                           pull()
          </code></pre>
          <div class="fragment fade-right">
            <p>Informação no texto.</p>
            <pre><code class="r" data-trim contenteditable spellcheck="false">
              No período de referência foram recebidos `r recebidos`
              processos no 1º Grau da 15ª Região Judiciária.
            </code></pre>
          </div>
        </section>
	<section>
	  <p>Hierarquia de títulos é definida por quantidade de #.</p>
	  <pre><code class="r" data-trim contenteditable spellcheck="false">
            # Nível 1
            ## Nível 2
            ### Nível 3
            ...
	  </code></pre>
	  <div class="fragment fade-up">
	    <p>Insira no documento.</p>
	    <pre><code class="r" data-trim contenteditable spellcheck="false">
              # Recebimento
	    </code></pre>
	  </div>
	</section>
	<section>
	  <p>Função de formatação (no <i>chunk</i>).</p>
	  <pre><code class="r" data-trim contenteditable spellcheck="false">
            # funções
            formatar <- function(x) {
              format(x, big.mark = ".", decimal.mark = ",")
            }
          </code></pre>
	  <div class="fragment fade-right">
            <p>Atualizar no texto.</p>
            <pre><code class="r" data-trim contenteditable spellcheck="false">
              ... `r formatar(recebidos)` ...
            </code></pre>
          </div>
	</section>
	<section>
	  <p>Parametrizar o relatório</p>
	  <pre><code class="r" data-trim contenteditable spellcheck="false">
            # variáveis
            ano <- 2018
            recebidos <- mov_proc %>%
                           filter(grau == 1, year(periodo) == ano) %>%
                           summarise(total = sum(recebidos)) %>%
                           pull()
          </code></pre>
          <div class="fragment fade-right">
            <p>Atualizar no texto.</p>
            <pre><code class="r" data-trim contenteditable spellcheck="false">
              Em `r ano`, de referência ...
            </code></pre>
          </div>
	</section>
        <section>
          <p>Gráfico em novo <i>chunk</i>.</p>
          <pre><code class="r" data-trim contenteditable spellcheck="false">
            ```{r}
            mov_proc %>%
              filter(grau == 1, year(periodo) == ano) %>%
              group_by(periodo) %>%
              summarise(total = sum(recebidos)) %>%
              ggplot(mapping = aes(x = periodo, y = total)) +
              geom_line()
            ```
          </code></pre>
          <div class="fragment fade-right">
            <p>Incluir as opções no <i>chunk</i>.</p>
            <pre><code class="r" data-trim contenteditable spellcheck="false">
              echo = FALSE, fig.height = 2.5
            </code></pre>
          </div>
        </section>
	<section>
          <p>Customizar a partir de um arquivo de referência.</p>
          <pre><code data-trim contenteditable spellcheck="false">
            ---
            title: "Título"
            author: "Autor"
            date: "X de xxxxx de XXXX"
            output:
              odt_document:
                reference_odt: modelo.odt
            ---
          </code></pre>
          <p>Executar o arquivo uma vez. Editar os estilos, cabeçalho e rodapé conforme as preferências e salvar como <code>modelo.odt</code>.</p>
        </section>
        <section data-background="#017243">
          <font size="6">
            <p>Produza um relatório simples sobre a movimentação processual em uma Jurisdição da sua escolha. O relatório deve conter:</p>
            <ul>
              <li>Título, autor e data.</li>
              <li>Um parágrafo inicial informando (dinamicamente) a jurisdição escolhida, o período de referência e quantos processos foram recebidos, julgados no período todo e quantos estavam pendentes ao final do período.</li>
              <li>Um gráfico de barras com a taxa de julgamento por período.</li>
              <li>Um mapa com a taxa de julgamento no período da Região.</li>
            </ul>
          </font>
        </section>	
      </section>
      <!-- Considerações Finais -->
      <section>
        <h2>Considerações Finais</h2>
        <ul>
          <li>Exploração e visualização de dados: <a href="http://r4ds.had.co.nz/" target="_blank">R for Data Science</a>.</li>
          <li>Relatórios dinâmicos: <a href="https://yihui.name/knitr/" target="_blank">knitr</a>.</li>
          <li>Dicas e novidades de R: <a href="https://www.r-bloggers.com/" target="_blank">R-bloggers</a>.</li>
        </ul>
      </section>
    </div>
  </div>
  <script type="text/JavaScript" src="lib/js/head.min.js"></script>
  <script type="text/JavaScript" src="js/reveal.js"></script>
  <script>
  Reveal.initialize({
    dependencies: [
      { src: "plugin/markdown/marked.js" },
      { src: "plugin/markdown/markdown.js" },
      { src: "plugin/notes/notes.js", async: true },
      { src: 'plugin/zoom-js/zoom.js', async: true },
      { src: 'plugin/math/math.js', async: true },
      { src: "plugin/highlight/highlight.js", async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
    ],
    transition: "convex",
    backgroundTransition: "zoom"
  });
</script>
</body>
</html>
